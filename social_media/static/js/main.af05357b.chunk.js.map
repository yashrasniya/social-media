{"version":3,"sources":["logo.svg","comments/component.js","App.js","reportWebVitals.js","index.js"],"names":["HandelError","status","alert","window","location","href","Comments","props","useState","post","setPost","comment","setComment","likeButStyle","setLikeButStyle","is_like","doLike","setDoLike","useEffect","myCallback","xhr","XMLHttpRequest","responseType","url","console","log","split","id","open","onload","serverResponse","response","onerror","e","send","dataFinder","responce","post_comment","likes","photo","post_description","setCountLike","className","src","onClick","handleCommentAction","JSON","stringify","action","onSubmit","event","data","preventDefault","temp","myFormData","FormData","target","append","unshift","reset","doChange","type","name","required","value","CommentRender","comments","json","method","endpoint","callback","csrftoken","cookieValue","document","cookie","cookies","i","length","trim","substring","decodeURIComponent","getCookie","setRequestHeader","undefined","map","index","Render","text","Like","setLike","handleCommentLiking","post-id","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.af05357b.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import React, {useEffect, useState} from 'react';\r\n\r\nfunction HandelError(status){\r\nif(status===403){\r\nalert('you are not login')\r\nwindow.location.href = \"http://127.0.0.1:8000/login\";\r\n}\r\nif(status===500){\r\nalert('server side error')\r\n}\r\n}\r\n\r\nexport function Comments(props){\r\nconst [post,setPost]=useState([])\r\nconst [comment,setComment]=useState([])\r\nconst [likeButStyle,setLikeButStyle]=useState('btn-outline-primary')\r\nconst [doLike,setDoLike]=useState(post.is_like?true:false)\r\n\r\n\r\n        useEffect(()=>{\r\n    const myCallback=(responce)=>{\r\n    console.log(responce)\r\n    setPost(responce)\r\n    setComment(responce.post_comment)\r\n    }\r\n    dataFinder(myCallback)\r\n    },[])\r\n    const {id,likes,photo, post_description}=post\r\nconst [countLike,setCountLike]=useState(likes)\r\n    function doChange(data){\r\n        data.preventDefault()\r\n        let temp=[...comment]\r\n        const myFormData= new FormData(data.target)\r\n        myFormData.append('post',id)\r\n        handleCommentAction(myFormData,false,'POST','api/post/do_comment',(responce,status)=>{\r\n        if (status === 200){\r\n            temp.unshift(responce)\r\n            setComment(temp)\r\n            data.target.reset()}\r\n            else{\r\n            HandelError(status)\r\n            alert(\"there is an error\")\r\n            }})\r\n\r\n    }\r\n\r\n    function handleLike(){\r\n    console.log(doLike)\r\n    if (doLike){\r\n        handleCommentAction(JSON.stringify({id: post.id,action:\"unlike\" }),true,'POST','api/post/action',(responce,status)=>{\r\n        if(status===200){\r\n        setLikeButStyle('btn-primary')\r\n        setCountLike(responce.likes)\r\n        setPost(responce)\r\n        setDoLike(false)\r\n        }else{\r\n         HandelError(status)\r\n        }\r\n        })\r\n\r\n    }\r\n    else{\r\n    handleCommentAction(JSON.stringify({id: post.id,action:\"like\" }),true,'POST','api/post/action',(responce,status)=>{\r\n        if(status===200){\r\n        setLikeButStyle('btn-outline-primary')\r\n        setDoLike(true)\r\n        setPost(responce)\r\n        setCountLike(responce.likes)}else{\r\n        HandelError(status)\r\n\r\n        }\r\n        })\r\n    }\r\n    }\r\n\r\nreturn (\r\n <div className=\" mb-1 col-md-4 mx-auto \">\r\n<div className=\"col m-3 \">\r\n<div className=\"card  \">\r\n<img src={photo} className=\"card-img-top m-1\"/>\r\n    <div className=\"row m-3\">\r\n    <div className=\"col-9 \">\r\n<h4 className=\"card-text col-auto\">{post_description}</h4></div>\r\n<div className=\"col-3 text-right\">\r\n<button className={'btn '+likeButStyle} onClick={handleLike}>{likes} like</button>\r\n</div>\r\n        </div>\r\n\r\n<div>\r\n\r\n<div className=\" p-2 m-3 card\">\r\n        <form onSubmit={(event)=>{\r\n        doChange(event)\r\n        }}>\r\n\r\n\r\n                <div className=\"row m-2\">\r\n            <div className=\"col\">\r\n            <input type=\"text\" name=\"comment\" className=\"col-12 mt-1 border rounded-pill\"  required={true}></input></div>\r\n        <div className=\"col-auto text-right  \">\r\n<div className=\"text-right\">\r\n            <input type=\"submit\" name=\"DoComment\"  className=\"btn border rounded-pill\"  value=\"comment\"></input>\r\n            </div>\r\n            </div>\r\n                </div>\r\n</form>\r\n<CommentRender comments={comment}/>\r\n\r\n\r\n</div>\r\n\r\n            </div>\r\n\r\n</div>\r\n    </div>\r\n</div>\r\n    )\r\n}\r\n\r\nfunction handleCommentAction(data,json,method,endpoint,callback){\r\n\r\n        const xhr= new XMLHttpRequest()\r\n        const csrftoken = getCookie('csrftoken');\r\n        xhr.responseType='json'\r\n        console.log(data,endpoint)\r\n        xhr.open(method,`http://127.0.0.1:8000/${endpoint}`)\r\n        if (json){xhr.setRequestHeader(\"Content-Type\",\"application/json\")}\r\n        if (csrftoken){\r\n            console.log(\"csrf token\")\r\n            xhr.setRequestHeader(\"HTTP_X_REQUESTED_WITH\",\"XMLHttpRequest\")\r\n            xhr.setRequestHeader(\"X-Requested-With\",\"XMLHttpRequest\")\r\n            xhr.setRequestHeader(\"X-CSRFToken\" ,csrftoken)\r\n            }\r\n        xhr.onload=function(){\r\n            const serverResponse =xhr.response\r\n            const status =xhr.status\r\n            console.log(serverResponse)\r\n            callback(serverResponse,status)\r\n\r\n\r\n        }\r\n        xhr.onerror=function(e){\r\n        console.log(e)\r\n        }\r\n\r\n        xhr.send(data)\r\n\r\n    }\r\n\r\nfunction getCookie(name) {\r\n    var cookieValue = null;\r\n    if (document.cookie && document.cookie !== '') {\r\n        var cookies = document.cookie.split(';');\r\n        for (var i = 0; i < cookies.length; i++) {\r\n            var cookie = cookies[i].trim();\r\n            // Does this cookie string begin with the name we want?\r\n            if (cookie.substring(0, name.length + 1) === (name + '=')) {\r\n                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    return cookieValue;\r\n}\r\n\r\n\r\nfunction dataFinder(myCallback){\r\nconst xhr= new XMLHttpRequest()\r\n        xhr.responseType='json'\r\n        let url=window.location.href\r\n        console.log(url.split(\":\"))\r\n\r\n        let id=url.split(\":\")[2]\r\n        id=4\r\n        xhr.open('GET',`http://127.0.0.1:8000/api/post/data/${id}`)\r\n        xhr.onload=function(){\r\n            const serverResponse =xhr.response\r\n            myCallback(serverResponse)\r\n    }\r\n    xhr.onerror=function(e){\r\n    console.log(e)\r\n    }\r\n        xhr.send()}\r\n\r\n\r\nfunction CommentRender(props){\r\n\r\nif (props.comments!=undefined){\r\nconst {comments}=props\r\nreturn(comments.map((comments,index) => {\r\n        return(<Render comment={comments} key={index} /> )})\r\n)\r\n}\r\n\r\nreturn(<h4>hi</h4>)\r\n}\r\n\r\nfunction Render(props){\r\n    const {comment}=props\r\n    console.log(comment.is_like)\r\n    let action;\r\n\r\n\r\n    if(comment.is_like){action='unlike'}else{action='like'}\r\n\r\n    const[Like,setLike]=useState({doLike:comment.is_like,text:action})\r\n\r\n    function handleCommentLiking(id){\r\n        let data;\r\n        console.log(id)\r\n            if (Like.doLike){\r\n            \r\n            \r\n                data={id:id,action:Like.text}\r\n\r\n\r\n                handleCommentAction(JSON.stringify(data),true,'POST','api/post_comment/action',(response,status)=>{\r\n\r\n                if(status===200){setLike({doLike : false,text:\"like\"})}else(HandelError(status))\r\n                }\r\n\r\n            )\r\n\r\n        }else{\r\n            data={id:id,action:Like.text}\r\n\r\n            handleCommentAction(JSON.stringify(data),true,'POST','api/post_comment/action',(response,status)=>{\r\n\r\n            if(status===200){setLike({doLike : true,text:\"unlike\"})}else(HandelError(status))\r\n\r\n            }\r\n            )\r\n\r\n        }\r\n\r\n}\r\n\r\nreturn(<div className='m-2 card p-2'>\r\n<div className='row'>\r\n<div className='col-10  '>\r\n<div className='text-left'>\r\n<p className='text-left' >{comment.comment} </p>\r\n</div>\r\n</div>\r\n<div className='col '>\r\n<button className='btn' onClick={(e)=>handleCommentLiking(comment.id)}>\r\n<a  className='text-right' name='like-button' post-id=\"+comment.id+\" >{Like.text}</a></button>\r\n</div>\r\n</div>\r\n</div>)\r\n\r\n}\r\n","import logo from './logo.svg';\nimport './App.css';\nimport {Comments} from './comments/index'\nfunction App() {\n  return (\n\n    <Comments/>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}